
# VPS Management API

Это REST-сервис для управления виртуальными серверами (VPS), реализованный с использованием Django и Django Rest Framework (DRF).

## Описание

API предоставляет возможности для создания, получения, обновления статуса и удаления виртуальных серверов. Каждый VPS имеет следующие параметры:

- **uid** — уникальный идентификатор сервера.
- **cpu** — количество процессорных ядер.
- **ram** — объем оперативной памяти.
- **hdd** — объем дискового пространства.
- **status** — текущий статус сервера (например, started, blocked, stopped).

## Установка
### Примечание
**Вместо команд из инструкций ниже вы можете использовать ```make``` и ```Makefile```**

### Docker
Для упрощения процесса развертывания и управления зависимостями, вы можете использовать Docker и Docker Compose.

1. Убедитесь, что Docker и Docker Compose установлены на вашем компьютере.

2. Запустите Docker Compose:

    ```bash
    docker-compose up --build
    ```
    или 
    ```bash
    docker-compose up --build -d
    ```
    Эта команда, например, запустит контейнер и вы не будете видеть логов.


Теперь API доступно по адресу http://127.0.0.1:8000.

Для остановки контейнеров используйте команду:

```bash
docker-compose down
```

### Cтандарт
1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/ichiri0/VPS-TT
    cd VPS-TT
    ```

2. Установите виртуальное окружение и зависимости:

    ```bash
    python3 -m venv .venv
    source .venv/bin/activate
    pip install -r requirements.txt
    ```

    Для Windows:

    ```bash
    python -m venv .venv
    .venv\Scripts\activate
    pip install -r requirements.txt
    ```

3. Примените миграции базы данных:

    ```bash
    python manage.py migrate
    ```

4. Запустите сервер:

    ```bash
    python manage.py runserver
    ```

Теперь API доступно по адресу http://127.0.0.1:8000.

## API

### 1. Получить список всех VPS (с фильтрацией)

- **URL**: /api/v1/vps/
- **Метод**: GET
- **Параметры запроса**:
  - **status** (необязательный) — фильтрация по статусу VPS. Возможные значения: started, blocked, stopped.

Пример запроса:

```http
GET /api/v1/vps/?status=started
```

Ответ:

```json
[
     {
          "uid": "123e4567-e89b-12d3-a456-426614174001",
          "cpu": 4,
          "ram": 16,
          "hdd": 100,
          "status": "started"
     },
]
```

### 2. Создать новый VPS

- **URL**: /api/v1/vps/
- **Метод**: POST
- **Тело запроса**:

```json
{
     "cpu": 4,
     "ram": 16,
     "hdd": 100,
     "status": "started"
}
```

Ответ:

```json
{
     "uid": "123e4567-e89b-12d3-a456-426614174001",
     "cpu": 4,
     "ram": 16,
     "hdd": 100,
     "status": "started"
}
```

### 3. Получить данные о конкретном VPS

- **URL**: /api/v1/vps/<uid>/
- **Метод**: GET
- **Параметры**:
  - **uid** — уникальный идентификатор VPS.

Пример запроса:

```http
GET /api/v1/vps/123e4567-e89b-12d3-a456-426614174001/
```

Ответ:

```json
{
     "uid": "123e4567-e89b-12d3-a456-426614174001",
     "cpu": 4,
     "ram": 16,
     "hdd": 100,
     "status": "started"
}
```

### 4. Обновить статус VPS

- **URL**: /api/v1/vps/<uid>/
- **Метод**: PATCH
- **Параметры**:
  - **status** — новый статус VPS. Возможные значения: started, blocked, stopped.

Тело запроса:

```json
{
     "status": "blocked"
}
```

Ответ:

```json
{
     "status": "updated",
     "new_status": "blocked"
}
```

### 5. Удалить VPS

- **URL**: /api/v1/vps/<uid>/
- **Метод**: DELETE

Ответ:

```json
{
     "status": "deleted"
}
```

## Тестирование

Для тестирования API можно использовать инструменты вроде Postman или cURL.

Пример запроса cURL для создания VPS:

```bash
curl -X POST http://127.0.0.1:8000/api/v1/vps/ \
     -H "Content-Type: application/json" \
     -d '{"cpu": 4, "ram": 16, "hdd": 100, "status": "started"}'
```

## Запуск тестов

Для запуска тестов используйте команду:

```bash
python manage.py test
```


### Основные моменты в документации:

1. **Установка и запуск**: Пошаговая инструкция по клонированию, установке зависимостей, миграции базы данных и запуску сервера.
2. **API**: Детализированное описание всех доступных эндпоинтов, включая параметры запроса, примеры запросов и ответов.
3. **Тестирование**: Пример использования cURL для тестирования API.
4. **Лицензия**: В конце добавлена стандартная лицензия MIT.

Теперь у вас есть полная документация для проекта, которую можно использовать для ознакомления с API и его использования!


# Проект: REST-сервис для управления виртуальными серверами (VPS)

Этот проект представляет собой REST-сервис для управления виртуальными серверами (VPS) с использованием Django и Django Rest Framework (DRF).

## Установка и запуск

1. Клонируйте репозиторий:

    ```bash
    git clone https://your-repo-url.git
    cd Project
    ```

2. Создайте и активируйте виртуальное окружение:

    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/macOS
    venv\Scripts\activate     # Для Windows
    ```

3. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

4. Примените миграции:

    ```bash
    python manage.py migrate
    ```

5. Запустите сервер:

    ```bash
    python manage.py runserver
    ```

Сервис будет доступен по адресу: [http://127.0.0.1:8000](http://127.0.0.1:8000).

Вот обновленный блок документации для вашего README с результатами покрытия тестами:

# Проект: REST-сервис для управления виртуальными серверами (VPS)

Этот проект представляет собой REST-сервис для управления виртуальными серверами (VPS) с использованием Django и Django Rest Framework (DRF).

## Установка и запуск

1. Клонируйте репозиторий:

    ```bash
    git clone https://your-repo-url.git
    cd Project
    ```

2. Создайте и активируйте виртуальное окружение:

    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/macOS
    venv\Scripts\activate     # Для Windows
    ```

3. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

4. Примените миграции:

    ```bash
    python manage.py migrate
    ```

5. Запустите сервер:

    ```bash
    python manage.py runserver
    ```

Сервис будет доступен по адресу: [http://127.0.0.1:8000](http://127.0.0.1:8000).

## Тестирование

Для того чтобы протестировать приложение и измерить покрытие тестами, выполните следующие шаги:

1. Запустите тесты с покрытием:

    ```bash
    coverage run manage.py test
    ```

2. Выведите отчет о покрытии:

    ```bash
    coverage report
    ```

   Вы получите отчет о проценте покрытия тестами, например:

    ```
    Name                          Stmts   Miss  Cover   Missing
    -------------------------------------------------------
    app/models.py                    20      2    90%    5-6
    app/views.py                     35      5    85%    10-12
    app/tests.py                      8      0   100%    
    -------------------------------------------------------
    TOTAL                            63      7    89%
    ```

3. Для более детального отчета в HTML-формате выполните команду:

    ```bash
    coverage html
    ```

    Откройте файл `htmlcov/index.html` в браузере, чтобы просмотреть подробный отчет о покрытии тестами.

## Результаты покрытия тестами

По состоянию на последний запуск тестов, общий процент покрытия вашего проекта тестами составляет **93%**. 
## Технологии

- **Django**: Веб-фреймворк для Python.
- **Django Rest Framework**: Библиотека для построения RESTful API.
- **SQLite**: СУБД.
- **Docker**: Платформа для контейнеризации приложений.
- **Docker Compose**: Инструмент для управления многоконтейнерными Docker приложениями.
- **coverage.py**: Инструмент для измерения покрытия кода тестами.
- **Black**: Форматировщик кода для Python.
- **Linter**: Инструмент для статического анализа кода.
- **Makefile**: Файл для автоматизации сборки и управления проектом.

## Лицензия

MIT License.